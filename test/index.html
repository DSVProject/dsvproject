<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>D3 Test</title>
    <script type="text/javascript" src="d3/d3.js"></script>
    
    <style>
    	circle{
	    	fill:white;
	    	stroke:black;
	    	stroke-width:2px;
    	}
    </style>
  </head>
  <body>
  	<div>
  		<input type="text">
  		<input type="button" onclick="" value="Enqueue">
  		<input type="button" onclick="" value="Dequeue">
  		<input type="button" onclick="" value="Clear">
	  	<input type="button" onclick="resetPos()" value="Reset Position">
  	</div>
  	<div id="viz"></div>
  	
    <script type="text/javascript">
		  var jsonCircles = [
		  	{
		  		"id":1,
			  	"cx":20,
			  	"cy":20,
			  	"r":16
				}, {
					"id":2,
					"cx":70,
					"cy":70,
					"r":16
				}
		  ];
		  
		  var jsonRect = [
		  	{
		  		"id":3,
			  	"rx":110,
			  	"ry":110,
			  	"height":30,
			  	"width":30,
			  	"color":"blue"
		  	}, {
		  		"id":4,
			  	"rx":160,
			  	"ry":160,
			  	"height":30,
			  	"width":30,
			  	"color":"red"
		  	}
		  
		  ];
		  
		  var width = 960,
					height = 500;
					
			var zoom = d3.behavior.zoom();
	
	    var svgContainer = d3.select("#viz").append("svg")
	                       	.attr("width", width)
	                        .attr("height", height)
	                        .attr("pointer-events", "all")
	                        .style("border", "1px solid black"); 
	    
	    var panGroup = svgContainer.append("g")
								       .call(zoom.on("zoom", rescale))
										 .append("g");
			
			panGroup.append("rect")
					  	  .attr('width', width)
					      .attr('height', height)
					      .attr('fill', 'white');
								  
		  var circleGroup = panGroup.append("g");
		  
	    var circles = circleGroup.selectAll("circle")
	                    .data(jsonCircles)
	                    .enter()
	                    .append("circle");
	                    
	    var circleAtt = circles
	    					.attr("cx", function (d) { return d.cx; })
	    					.attr("cy", function (d) { return d.cy; })
	    					.attr("r", function (d) { return d.r; });
	    					
	    var rectGroup = panGroup.append("g");
	    
	    var rectangles = rectGroup.selectAll("rect")
	    						.data(jsonRect)
	    						.enter()
	    						.append("rect");
	    						
	    var rectAtt = rectangles
	    					.attr("x", function (d) { return d.rx })
	    					.attr("y", function (d) { return d.ry })
	    					.attr("height", function (d) { return d.height })
	    					.attr("width", function (d) { return d.width })
	    					.style("fill", function (d) { return d.color });
	    					
	    var textGroup = panGroup.append("g");
	    
	    var text = textGroup.selectAll("text")
	    				.data(jsonCircles)
	    				.enter()
	    				.append("text");
	    				
	    var textLabels = text
	    					.attr("x", function (d) { return d.cx; })
	    					.attr("y", function (d) { return d.cy; })
	    					.text( function (d) { return d.id; })
	    					.attr("font-family", "sans-serif")
	    					.attr("font-size", "18px")
	    					.attr("text-anchor", "middle")
	    					.attr("fill", "black");
			
			// reposition g
			function rescale() {
			  panGroup.attr("transform",
			      "translate(" + d3.event.translate + ")"
			      + " scale(" + d3.event.scale + ")");
			}
			
			function resetPos() {
				panGroup.attr('transform', null);
				zoom.scale(1);
        zoom.translate([0, 0]);
			}
	    					
	    /**
	    var circlesAtt = circles
	                      .attr("cx", function(d) {return d;})
	                      .attr("cy", function(d) {return d;})
	                      .attr("r", 20)
	                      .attr("id", function (d) {return d;})
	                      .style("fill", function (d) {
	                        var returnColor;
	                        if (d==30) {returnColor = "green";
	                        } else if (d==70) {returnColor = "blue";
	                        } else if (d==110) {returnColor = "red"; }
	                        return returnColor;
	                      });
	    **/
    </script>
  </body>
</html>    